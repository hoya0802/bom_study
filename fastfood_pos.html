<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>패스트푸드점 포스기</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ff6b35">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="패스트푸드점 포스기">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <script src="config.js"></script>
    <script src="user-theme.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', '맑은 고딕', Arial, sans-serif;
            background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .header {
            background: #fff;
            padding: 15px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }

        .header h1 {
            color: #ff6b35;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .main-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            height: calc(100vh - 80px);
        }

        /* 상단 주문 표시 영역 */
        .order-display {
            flex: 1;
            background: #fff;
            margin: 10px;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 200px;
        }

        .order-title {
            font-size: 1.2rem;
            color: #333;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .order-numbers {
            display: flex;
            flex-direction: column;
            gap: 15px;
            width: 100%;
            max-width: 300px;
        }

        .order-item {
            background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.1rem;
            font-weight: bold;
            box-shadow: 0 3px 10px rgba(255, 107, 53, 0.3);
            transform: scale(1);
            transition: transform 0.3s ease;
        }

        .order-item.new {
            animation: newOrder 0.5s ease;
        }

        @keyframes newOrder {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }

        /* 하단 입력 영역 */
        .input-section {
            background: #fff;
            margin: 10px;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .number-input {
            width: 100%;
            padding: 15px;
            border: 3px solid #e1e5e9;
            border-radius: 10px;
            font-size: 1.5rem;
            text-align: center;
            margin-bottom: 20px;
            font-weight: bold;
            color: #333;
        }

        .number-input:focus {
            outline: none;
            border-color: #ff6b35;
        }

        .number-pad {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .number-btn {
            background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            user-select: none;
        }

        .number-btn:active {
            transform: scale(0.95);
        }

        .number-btn.clear {
            background: linear-gradient(135deg, #ff4757 0%, #ff3742 100%);
        }

        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .action-btn {
            background: linear-gradient(135deg, #2ed573 0%, #1e90ff 100%);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            user-select: none;
        }

        .action-btn:active {
            transform: scale(0.95);
        }

        .action-btn.clear-all {
            background: linear-gradient(135deg, #ff4757 0%, #ff3742 100%);
        }

        /* 반응형 디자인 */
        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.3rem;
            }
            
            .order-display {
                margin: 5px;
                padding: 15px;
            }
            
            .input-section {
                margin: 5px;
                padding: 15px;
            }
            
            .number-btn {
                padding: 12px;
                font-size: 1.1rem;
            }
            
            .action-btn {
                padding: 12px;
                font-size: 1rem;
            }
        }
    </style>
</head>

<body>
    <div class="header">
        <h1>🍔 패스트푸드점 포스기 🍟</h1>
    </div>

    <div class="main-container">
        <!-- 상단 주문 표시 영역 -->
        <div class="order-display">
            <div class="order-title">📋 주문 대기 목록</div>
            <div class="order-numbers" id="orderNumbers">
                <div class="order-item" style="opacity: 0.5;">주문 번호를 입력해주세요</div>
            </div>
        </div>

        <!-- 하단 입력 영역 -->
        <div class="input-section">
            <input type="text" class="number-input" id="numberInput" placeholder="주문 번호를 입력하세요" readonly>
            
            <!-- 숫자 패드 -->
            <div class="number-pad">
                <button class="number-btn" onclick="addNumber('1')">1</button>
                <button class="number-btn" onclick="addNumber('2')">2</button>
                <button class="number-btn" onclick="addNumber('3')">3</button>
                <button class="number-btn" onclick="addNumber('4')">4</button>
                <button class="number-btn" onclick="addNumber('5')">5</button>
                <button class="number-btn" onclick="addNumber('6')">6</button>
                <button class="number-btn" onclick="addNumber('7')">7</button>
                <button class="number-btn" onclick="addNumber('8')">8</button>
                <button class="number-btn" onclick="addNumber('9')">9</button>
                <button class="number-btn clear" onclick="clearInput()">C</button>
                <button class="number-btn" onclick="addNumber('0')">0</button>
                <button class="number-btn clear" onclick="deleteLastChar()">←</button>
            </div>

            <!-- 액션 버튼 -->
            <div class="action-buttons">
                <button class="action-btn" onclick="confirmOrder()">✅ 확인</button>
                <button class="action-btn clear-all" onclick="clearAllOrders()">🗑️ 전체 삭제</button>
            </div>
        </div>
    </div>

    <script>
        // 주문 번호 배열 (최대 3개)
        let orderNumbers = [];
        let currentInput = '';

        // 숫자 입력
        function addNumber(num) {
            if (currentInput.length < 3) { // 최대 3자리까지만 입력 가능
                currentInput += num;
                updateInputDisplay();
            }
        }

        // 입력창 지우기
        function clearInput() {
            currentInput = '';
            updateInputDisplay();
        }

        // 마지막 문자 삭제
        function deleteLastChar() {
            currentInput = currentInput.slice(0, -1);
            updateInputDisplay();
        }

        // 입력창 업데이트
        function updateInputDisplay() {
            document.getElementById('numberInput').value = currentInput;
        }

        // 주문 확인
        function confirmOrder() {
            if (currentInput.trim() === '') {
                alert('주문 번호를 입력해주세요!');
                return;
            }

            const orderNumber = parseInt(currentInput);
            if (orderNumber < 1 || orderNumber > 999) {
                alert('1~999 사이의 번호를 입력해주세요!');
                return;
            }

            // 주문 번호 추가 (FIFO 방식)
            orderNumbers.push(orderNumber);
            
            // 최대 3개까지만 유지
            if (orderNumbers.length > 3) {
                orderNumbers.shift(); // 가장 오래된 번호 제거
            }

            // 화면 업데이트
            updateOrderDisplay();
            
            // 사운드 재생
            playOrderSound(orderNumber);
            
            // 입력창 초기화
            clearInput();
        }

        // 주문 표시 업데이트
        function updateOrderDisplay() {
            const orderNumbersContainer = document.getElementById('orderNumbers');
            
            if (orderNumbers.length === 0) {
                orderNumbersContainer.innerHTML = '<div class="order-item" style="opacity: 0.5;">주문 번호를 입력해주세요</div>';
                return;
            }

            orderNumbersContainer.innerHTML = '';
            
            orderNumbers.forEach((number, index) => {
                const orderItem = document.createElement('div');
                orderItem.className = 'order-item';
                orderItem.textContent = `${number}번 손님`;
                
                // 새로 추가된 항목에 애니메이션 적용
                if (index === orderNumbers.length - 1) {
                    orderItem.classList.add('new');
                }
                
                orderNumbersContainer.appendChild(orderItem);
            });
        }

        // 사운드 재생 (Web Speech API 사용)
        function playOrderSound(orderNumber) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance();
                utterance.text = `${orderNumber}번 손님 주문이 준비되었습니다.`;
                utterance.lang = 'ko-KR';
                utterance.rate = 0.8;
                utterance.pitch = 1.0;
                utterance.volume = 1.0;
                
                // 음성 재생
                speechSynthesis.speak(utterance);
            }
        }

        // 전체 주문 삭제
        function clearAllOrders() {
            if (orderNumbers.length === 0) {
                alert('삭제할 주문이 없습니다!');
                return;
            }
            
            if (confirm('모든 주문을 삭제하시겠습니까?')) {
                orderNumbers = [];
                updateOrderDisplay();
            }
        }

        // 키보드 이벤트 처리
        document.addEventListener('keydown', function(event) {
            if (event.key >= '0' && event.key <= '9') {
                addNumber(event.key);
            } else if (event.key === 'Enter') {
                confirmOrder();
            } else if (event.key === 'Backspace') {
                deleteLastChar();
            } else if (event.key === 'Escape') {
                clearInput();
            }
        });

        // 터치 이벤트 최적화
        document.addEventListener('touchstart', function() {}, {passive: true});
        document.addEventListener('touchmove', function() {}, {passive: true});

        // 초기화
        updateOrderDisplay();
    </script>
</body>

</html>

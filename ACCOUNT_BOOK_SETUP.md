# 가계부 시스템 설정 가이드

## 1. 데이터베이스 설정

### 1.1 Supabase 프로젝트 설정
1. [Supabase](https://supabase.com)에 로그인
2. 새 프로젝트 생성 또는 기존 프로젝트 선택
3. 프로젝트 설정에서 URL과 API 키 확인

### 1.2 데이터베이스 테이블 생성
1. Supabase 대시보드에서 **SQL Editor** 열기
2. `database_setup.sql` 파일의 내용을 복사하여 SQL Editor에 붙여넣기
3. **Run** 버튼 클릭하여 실행

### 1.3 테이블 구조 확인
생성된 테이블들:
- `categories`: 카테고리 정보
- `transactions`: 거래 내역
- `budgets`: 예산 설정 (선택사항)

## 2. 사용자 설정

### 2.1 사용자 테이블 확인
기존 `users` 테이블에 다음 필드들이 있는지 확인:
- `id`: UUID (기본키)
- `name`: 사용자 이름
- `password_hash`: 비밀번호 해시
- `role`: 사용자 역할 ('child' 또는 'adult')
- `emoji`: 사용자 이모지
- `color`: 사용자 색상

### 2.2 RLS 정책 확인
Row Level Security가 활성화되어 있는지 확인:
```sql
-- 사용자별 데이터 접근 정책
SELECT * FROM pg_policies WHERE tablename IN ('categories', 'transactions', 'budgets');
```

## 3. 파일 구조

### 3.1 생성된 파일들
```
bom_study-main/
├── account_book.html          # 메인 가계부 페이지
├── category_management.html   # 카테고리 관리 페이지
├── account_book.js           # 가계부 관련 JavaScript
├── database_setup.sql        # 데이터베이스 설정 스크립트
└── ACCOUNT_BOOK_SETUP.md     # 이 설정 가이드
```

### 3.2 수정된 파일들
- `index.html`: 메인 메뉴에 가계부 항목 추가
- `config.js`: 기존 설정 유지

## 4. 기능 설명

### 4.1 가계부 메인 페이지 (`account_book.html`)
- **일별/월별 탭**: 거래 내역을 일별 또는 월별로 조회
- **통계 표시**: 지출/수입/이체 합계 및 순수익 표시
- **필터링**: 날짜, 유형, 카테고리별 필터
- **거래 등록**: 팝업 모달을 통한 거래 등록/수정
- **거래 관리**: 수정/삭제 기능

### 4.2 카테고리 관리 페이지 (`category_management.html`)
- **카테고리 목록**: 그리드 형태로 카테고리 표시
- **카테고리 등록**: 이름, 유형, 색상, 아이콘 설정
- **카테고리 관리**: 수정/삭제 기능
- **필터링**: 유형별 카테고리 필터

### 4.3 주요 기능
- **사용자별 구분**: 각 사용자의 데이터는 완전히 분리
- **실시간 동기화**: Supabase를 통한 실시간 데이터 동기화
- **반응형 디자인**: 모바일/데스크톱 최적화
- **데이터 검증**: 입력 데이터 유효성 검사

## 5. 사용 방법

### 5.1 첫 실행
1. 데이터베이스 설정 완료
2. 메인 페이지에서 로그인
3. "📊 가계부" 메뉴 클릭
4. 카테고리 등록 후 거래 내역 입력

### 5.2 카테고리 설정
1. "🏷️ 카테고리 관리" 메뉴 클릭
2. "➕ 카테고리 추가" 버튼으로 새 카테고리 생성
3. 이름, 유형, 색상, 아이콘 설정
4. 저장 후 가계부에서 사용

### 5.3 거래 등록
1. 가계부 페이지에서 "➕ 거래 등록" 버튼 클릭
2. 거래 유형 선택 (지출/수입/이체)
3. 금액, 카테고리, 출처, 항목 입력
4. 거래일 설정 후 저장

## 6. 문제 해결

### 6.1 데이터베이스 연결 오류
- `config.js`의 Supabase URL과 API 키 확인
- 네트워크 연결 상태 확인
- Supabase 프로젝트 상태 확인

### 6.2 권한 오류
- RLS 정책이 올바르게 설정되었는지 확인
- 사용자 인증 상태 확인
- 데이터베이스 테이블 권한 확인

### 6.3 데이터 표시 오류
- 브라우저 개발자 도구에서 콘솔 오류 확인
- 데이터베이스에 실제 데이터가 있는지 확인
- 필터 설정 확인

## 7. 확장 가능한 기능

### 7.1 향후 추가 가능한 기능
- **통계 차트**: Chart.js를 활용한 시각화
- **예산 관리**: 월별 예산 설정 및 알림
- **데이터 내보내기**: CSV/Excel 다운로드
- **검색 기능**: 키워드 검색
- **반복 거래**: 정기적인 거래 설정

### 7.2 성능 최적화
- **페이지네이션**: 대용량 데이터 처리
- **캐싱**: 자주 사용되는 데이터 캐싱
- **인덱스**: 데이터베이스 쿼리 최적화

## 8. 보안 고려사항

### 8.1 데이터 보안
- 모든 데이터는 사용자별로 완전히 분리
- RLS 정책으로 데이터 접근 제한
- 민감한 정보 암호화 고려

### 8.2 입력 검증
- 클라이언트/서버 양쪽에서 데이터 검증
- SQL 인젝션 방지
- XSS 공격 방지

## 9. 지원 및 문의

문제가 발생하거나 추가 기능이 필요한 경우:
1. 브라우저 개발자 도구에서 오류 확인
2. Supabase 로그에서 서버 오류 확인
3. 데이터베이스 쿼리 성능 확인

---

**참고**: 이 가계부 시스템은 교육용 프로젝트의 일부로 개발되었으며, 실제 금융 데이터 관리에는 추가적인 보안 조치가 필요할 수 있습니다. 